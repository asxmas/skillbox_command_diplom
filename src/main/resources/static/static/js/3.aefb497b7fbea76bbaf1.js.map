{"version":3,"sources":["webpack:///./node_modules/vue-virtual-scroll-list/dist/index.js","webpack:///./node_modules/babel-runtime/core-js/get-iterator.js","webpack:///./node_modules/core-js/library/fn/get-iterator.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator.js","webpack:///src/components/Im/Dialog.vue","webpack:///./src/components/Im/Dialog.vue?2f9b","webpack:///./src/components/Im/Dialog.vue","webpack:///src/components/Im/ChatMessage.vue","webpack:///./src/components/Im/ChatMessage.vue?11c6","webpack:///./src/components/Im/ChatMessage.vue","webpack:///src/components/Im/Chat.vue","webpack:///./src/components/Im/Chat.vue?82a3","webpack:///./src/components/Im/Chat.vue","webpack:///src/pages/User/Im.vue","webpack:///./src/pages/User/Im.vue?58bb","webpack:///./src/pages/User/Im.vue"],"names":["factory","Vue","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_toConsumableArray","arr","Array","isArray","_arrayLikeToArray","_arrayWithoutHoles","iter","Symbol","iterator","from","_iterableToArray","o","minLen","n","prototype","toString","call","slice","constructor","name","test","_unsupportedIterableToArray","TypeError","_nonIterableSpread","len","arr2","hasOwnProperty","DIRECTION_TYPE","CALC_TYPE","Virtual","param","callUpdate","instance","Constructor","_classCallCheck","this","init","protoProps","staticProps","value","sizes","Map","firstRangeTotalSize","firstRangeAverageSize","lastCalcIndex","fixedSizeValue","calcType","offset","direction","range","create","checkRange","keeps","start","end","padFront","padBehind","getIndexOffset","slotHeaderSize","_this","forEach","v","includes","id","size","set","Math","min","uniqueIds","values","reduce","acc","val","round","isFront","isBehind","max","updateRange","getEndByStart","handleDataSourcesChange","handleFront","handleBehind","overs","getScrollOvers","buffer","isFixedType","floor","low","middle","middleOffset","high","givenIndex","indexSize","index","get","getEstimateSize","getLastIndex","getPadFront","getPadBehind","getRange","theoryEnd","lastIndex","estimateSize","VirtualProps","dataKey","type","String","Function","required","dataSources","dataComponent","Number","default","extraProps","topThreshold","bottomThreshold","pageMode","Boolean","rootTag","wrapTag","wrapClass","wrapStyle","itemTag","itemClass","itemClassAdd","itemStyle","headerTag","headerClass","headerStyle","footerTag","footerClass","footerStyle","itemScopedSlots","ItemProps","event","tag","horizontal","source","component","uniqueKey","scopedSlots","SlotProps","Wrapper","created","shapeKey","mounted","ResizeObserver","resizeObserver","dispatchSizeChange","observe","$el","updated","beforeDestroy","disconnect","methods","getCurrentSize","$parent","$emit","hasInitial","Item","mixins","render","h","_this$extraProps","_this$scopedSlots","attrs","role","Slot","$slots","EVENT_TYPE","SLOT_TYPE","data","watch","dataSources.length","virtual","updateParam","getUniqueIdFromDataSources","newValue","handleSlotSizeChange","scrollToIndex","scrollToOffset","isHorizontal","directionKey","installVirtual","$on","onItemResized","header","footer","onSlotResized","activated","updatePageModeFront","document","addEventListener","onScroll","passive","destroy","removeEventListener","getSize","getSizes","getOffset","documentElement","body","root","$refs","ceil","getClientSize","getScrollSize","scrollToBottom","shepherd","setTimeout","rect","getBoundingClientRect","defaultView","ownerDocument","offsetFront","left","pageXOffset","top","pageYOffset","reset","slotFooterSize","onRangeChanged","map","dataSource","saveSize","hasInit","evt","clientSize","scrollSize","handleScroll","emitEvent","getRenderSlots","slots","_this$range","push","style","class","concat","console","warn","_this$$slots","_this$range2","paddingStyle","padding","wrapperStyle","assign","ref","on","&scroll","width","height","module","exports","__webpack_require__","__esModule","anObject","getIterator","it","iterFn","Dialog","active","online","me","info","computed","statusText","moment_default","last_message","recipient","last_online_time","fromNow","Im_Dialog","_vm","_h","$createElement","_c","_self","staticClass","to","params","src","photo","alt","first_name","_v","_s","last_name","_e","message_text","_f","time","staticRenderFns","components_Im_Dialog","normalizeComponent","ssrContext","ChatMessage","Im_ChatMessage","date","isSentByMe","components_Im_ChatMessage","ChatMessage_normalizeComponent","makeHeader","msgDate","sid","stubDate","Chat","messages","mes","itemComponent","isUserViewHistory","fetching","follow","setVirtualListToBottom","messagesGrouped","groups","headerDate","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","msg","format","err","return","extends_default","vuex_esm","onSubmitMessage","postMessage","onScrollToTop","asyncToGenerator_default","regenerator_default","a","mark","_callee","oldest","wrap","_context","prev","vsl","isHistoryEndReached","loadOlderMessages","setVirtualListToOffset","$nextTick","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","groupedMsg","stop","onScrollToBottom","Im_Chat","data-key","data-sources","data-component","wrap-class","root-tag","totop","$event","tobottom","directives","rawName","expression","slot","action","submit","preventDefault","placeholder","domProps","input","composing","Im","components","ImDialog","ImChat","Chat_normalizeComponent","countPush","unread","checkOnlineUser","diff","clickOnDialog","dialogId","$router","query","activeDialog","selectDialogByRoute","route","vm","switchDialog","userId","createDialogWithUser","dialogs","apiLoadAllDialogs","log","beforeRouteEnter","_ref","_this2","_callee2","_context2","_x","apply","arguments","beforeRouteUpdate","closeDialog","User_Im","_l","dialog","unread_count","nativeOn","click","Im_Component","Im_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/3.aefb497b7fbea76bbaf1.js","sourcesContent":["/*!\n * vue-virtual-scroll-list v2.3.2\n * open source under the MIT license\n * https://github.com/tangbc/vue-virtual-scroll-list#readme\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('vue')) :\n  typeof define === 'function' && define.amd ? define(['vue'], factory) :\n  (global = global || self, global.VirtualList = factory(global.Vue));\n}(this, (function (Vue) { 'use strict';\n\n  Vue = Vue && Object.prototype.hasOwnProperty.call(Vue, 'default') ? Vue['default'] : Vue;\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(n);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  /**\n   * virtual list core calculating center\n   */\n  var DIRECTION_TYPE = {\n    FRONT: 'FRONT',\n    // scroll up or left\n    BEHIND: 'BEHIND' // scroll down or right\n\n  };\n  var CALC_TYPE = {\n    INIT: 'INIT',\n    FIXED: 'FIXED',\n    DYNAMIC: 'DYNAMIC'\n  };\n  var LEADING_BUFFER = 2;\n\n  var Virtual = /*#__PURE__*/function () {\n    function Virtual(param, callUpdate) {\n      _classCallCheck(this, Virtual);\n\n      this.init(param, callUpdate);\n    }\n\n    _createClass(Virtual, [{\n      key: \"init\",\n      value: function init(param, callUpdate) {\n        // param data\n        this.param = param;\n        this.callUpdate = callUpdate; // size data\n\n        this.sizes = new Map();\n        this.firstRangeTotalSize = 0;\n        this.firstRangeAverageSize = 0;\n        this.lastCalcIndex = 0;\n        this.fixedSizeValue = 0;\n        this.calcType = CALC_TYPE.INIT; // scroll data\n\n        this.offset = 0;\n        this.direction = ''; // range data\n\n        this.range = Object.create(null);\n\n        if (param) {\n          this.checkRange(0, param.keeps - 1);\n        } // benchmark test data\n        // this.__bsearchCalls = 0\n        // this.__getIndexOffsetCalls = 0\n\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.init(null, null);\n      } // return current render range\n\n    }, {\n      key: \"getRange\",\n      value: function getRange() {\n        var range = Object.create(null);\n        range.start = this.range.start;\n        range.end = this.range.end;\n        range.padFront = this.range.padFront;\n        range.padBehind = this.range.padBehind;\n        return range;\n      }\n    }, {\n      key: \"isBehind\",\n      value: function isBehind() {\n        return this.direction === DIRECTION_TYPE.BEHIND;\n      }\n    }, {\n      key: \"isFront\",\n      value: function isFront() {\n        return this.direction === DIRECTION_TYPE.FRONT;\n      } // return start index offset\n\n    }, {\n      key: \"getOffset\",\n      value: function getOffset(start) {\n        return (start < 1 ? 0 : this.getIndexOffset(start)) + this.param.slotHeaderSize;\n      }\n    }, {\n      key: \"updateParam\",\n      value: function updateParam(key, value) {\n        var _this = this;\n\n        if (this.param && key in this.param) {\n          // if uniqueIds change, find out deleted id and remove from size map\n          if (key === 'uniqueIds') {\n            this.sizes.forEach(function (v, key) {\n              if (!value.includes(key)) {\n                _this.sizes[\"delete\"](key);\n              }\n            });\n          }\n\n          this.param[key] = value;\n        }\n      } // save each size map by id\n\n    }, {\n      key: \"saveSize\",\n      value: function saveSize(id, size) {\n        this.sizes.set(id, size); // we assume size type is fixed at the beginning and remember first size value\n        // if there is no size value different from this at next comming saving\n        // we think it's a fixed size list, otherwise is dynamic size list\n\n        if (this.calcType === CALC_TYPE.INIT) {\n          this.fixedSizeValue = size;\n          this.calcType = CALC_TYPE.FIXED;\n        } else if (this.calcType === CALC_TYPE.FIXED && this.fixedSizeValue !== size) {\n          this.calcType = CALC_TYPE.DYNAMIC; // it's no use at all\n\n          delete this.fixedSizeValue;\n        } // calculate the average size only in the first range\n\n\n        if (this.calcType !== CALC_TYPE.FIXED && typeof this.firstRangeTotalSize !== 'undefined') {\n          if (this.sizes.size < Math.min(this.param.keeps, this.param.uniqueIds.length)) {\n            this.firstRangeTotalSize = _toConsumableArray(this.sizes.values()).reduce(function (acc, val) {\n              return acc + val;\n            }, 0);\n            this.firstRangeAverageSize = Math.round(this.firstRangeTotalSize / this.sizes.size);\n          } else {\n            // it's done using\n            delete this.firstRangeTotalSize;\n          }\n        }\n      } // in some special situation (e.g. length change) we need to update in a row\n      // try goiong to render next range by a leading buffer according to current direction\n\n    }, {\n      key: \"handleDataSourcesChange\",\n      value: function handleDataSourcesChange() {\n        var start = this.range.start;\n\n        if (this.isFront()) {\n          start = start - LEADING_BUFFER;\n        } else if (this.isBehind()) {\n          start = start + LEADING_BUFFER;\n        }\n\n        start = Math.max(start, 0);\n        this.updateRange(this.range.start, this.getEndByStart(start));\n      } // when slot size change, we also need force update\n\n    }, {\n      key: \"handleSlotSizeChange\",\n      value: function handleSlotSizeChange() {\n        this.handleDataSourcesChange();\n      } // calculating range on scroll\n\n    }, {\n      key: \"handleScroll\",\n      value: function handleScroll(offset) {\n        this.direction = offset < this.offset ? DIRECTION_TYPE.FRONT : DIRECTION_TYPE.BEHIND;\n        this.offset = offset;\n\n        if (!this.param) {\n          return;\n        }\n\n        if (this.direction === DIRECTION_TYPE.FRONT) {\n          this.handleFront();\n        } else if (this.direction === DIRECTION_TYPE.BEHIND) {\n          this.handleBehind();\n        }\n      } // ----------- public method end -----------\n\n    }, {\n      key: \"handleFront\",\n      value: function handleFront() {\n        var overs = this.getScrollOvers(); // should not change range if start doesn't exceed overs\n\n        if (overs > this.range.start) {\n          return;\n        } // move up start by a buffer length, and make sure its safety\n\n\n        var start = Math.max(overs - this.param.buffer, 0);\n        this.checkRange(start, this.getEndByStart(start));\n      }\n    }, {\n      key: \"handleBehind\",\n      value: function handleBehind() {\n        var overs = this.getScrollOvers(); // range should not change if scroll overs within buffer\n\n        if (overs < this.range.start + this.param.buffer) {\n          return;\n        }\n\n        this.checkRange(overs, this.getEndByStart(overs));\n      } // return the pass overs according to current scroll offset\n\n    }, {\n      key: \"getScrollOvers\",\n      value: function getScrollOvers() {\n        // if slot header exist, we need subtract its size\n        var offset = this.offset - this.param.slotHeaderSize;\n\n        if (offset <= 0) {\n          return 0;\n        } // if is fixed type, that can be easily\n\n\n        if (this.isFixedType()) {\n          return Math.floor(offset / this.fixedSizeValue);\n        }\n\n        var low = 0;\n        var middle = 0;\n        var middleOffset = 0;\n        var high = this.param.uniqueIds.length;\n\n        while (low <= high) {\n          // this.__bsearchCalls++\n          middle = low + Math.floor((high - low) / 2);\n          middleOffset = this.getIndexOffset(middle);\n\n          if (middleOffset === offset) {\n            return middle;\n          } else if (middleOffset < offset) {\n            low = middle + 1;\n          } else if (middleOffset > offset) {\n            high = middle - 1;\n          }\n        }\n\n        return low > 0 ? --low : 0;\n      } // return a scroll offset from given index, can efficiency be improved more here?\n      // although the call frequency is very high, its only a superposition of numbers\n\n    }, {\n      key: \"getIndexOffset\",\n      value: function getIndexOffset(givenIndex) {\n        if (!givenIndex) {\n          return 0;\n        }\n\n        var offset = 0;\n        var indexSize = 0;\n\n        for (var index = 0; index < givenIndex; index++) {\n          // this.__getIndexOffsetCalls++\n          indexSize = this.sizes.get(this.param.uniqueIds[index]);\n          offset = offset + (typeof indexSize === 'number' ? indexSize : this.getEstimateSize());\n        } // remember last calculate index\n\n\n        this.lastCalcIndex = Math.max(this.lastCalcIndex, givenIndex - 1);\n        this.lastCalcIndex = Math.min(this.lastCalcIndex, this.getLastIndex());\n        return offset;\n      } // is fixed size type\n\n    }, {\n      key: \"isFixedType\",\n      value: function isFixedType() {\n        return this.calcType === CALC_TYPE.FIXED;\n      } // return the real last index\n\n    }, {\n      key: \"getLastIndex\",\n      value: function getLastIndex() {\n        return this.param.uniqueIds.length - 1;\n      } // in some conditions range is broke, we need correct it\n      // and then decide whether need update to next range\n\n    }, {\n      key: \"checkRange\",\n      value: function checkRange(start, end) {\n        var keeps = this.param.keeps;\n        var total = this.param.uniqueIds.length; // datas less than keeps, render all\n\n        if (total <= keeps) {\n          start = 0;\n          end = this.getLastIndex();\n        } else if (end - start < keeps - 1) {\n          // if range length is less than keeps, corrent it base on end\n          start = end - keeps + 1;\n        }\n\n        if (this.range.start !== start) {\n          this.updateRange(start, end);\n        }\n      } // setting to a new range and rerender\n\n    }, {\n      key: \"updateRange\",\n      value: function updateRange(start, end) {\n        this.range.start = start;\n        this.range.end = end;\n        this.range.padFront = this.getPadFront();\n        this.range.padBehind = this.getPadBehind();\n        this.callUpdate(this.getRange());\n      } // return end base on start\n\n    }, {\n      key: \"getEndByStart\",\n      value: function getEndByStart(start) {\n        var theoryEnd = start + this.param.keeps - 1;\n        var truelyEnd = Math.min(theoryEnd, this.getLastIndex());\n        return truelyEnd;\n      } // return total front offset\n\n    }, {\n      key: \"getPadFront\",\n      value: function getPadFront() {\n        if (this.isFixedType()) {\n          return this.fixedSizeValue * this.range.start;\n        } else {\n          return this.getIndexOffset(this.range.start);\n        }\n      } // return total behind offset\n\n    }, {\n      key: \"getPadBehind\",\n      value: function getPadBehind() {\n        var end = this.range.end;\n        var lastIndex = this.getLastIndex();\n\n        if (this.isFixedType()) {\n          return (lastIndex - end) * this.fixedSizeValue;\n        } // if it's all calculated, return the exactly offset\n\n\n        if (this.lastCalcIndex === lastIndex) {\n          return this.getIndexOffset(lastIndex) - this.getIndexOffset(end);\n        } else {\n          // if not, use a estimated value\n          return (lastIndex - end) * this.getEstimateSize();\n        }\n      } // get the item estimate size\n\n    }, {\n      key: \"getEstimateSize\",\n      value: function getEstimateSize() {\n        return this.isFixedType() ? this.fixedSizeValue : this.firstRangeAverageSize || this.param.estimateSize;\n      }\n    }]);\n\n    return Virtual;\n  }();\n\n  /**\n   * props declaration for default, item and slot component\n   */\n  var VirtualProps = {\n    dataKey: {\n      type: [String, Function],\n      required: true\n    },\n    dataSources: {\n      type: Array,\n      required: true\n    },\n    dataComponent: {\n      type: [Object, Function],\n      required: true\n    },\n    keeps: {\n      type: Number,\n      \"default\": 30\n    },\n    extraProps: {\n      type: Object\n    },\n    estimateSize: {\n      type: Number,\n      \"default\": 50\n    },\n    direction: {\n      type: String,\n      \"default\": 'vertical' // the other value is horizontal\n\n    },\n    start: {\n      type: Number,\n      \"default\": 0\n    },\n    offset: {\n      type: Number,\n      \"default\": 0\n    },\n    topThreshold: {\n      type: Number,\n      \"default\": 0\n    },\n    bottomThreshold: {\n      type: Number,\n      \"default\": 0\n    },\n    pageMode: {\n      type: Boolean,\n      \"default\": false\n    },\n    rootTag: {\n      type: String,\n      \"default\": 'div'\n    },\n    wrapTag: {\n      type: String,\n      \"default\": 'div'\n    },\n    wrapClass: {\n      type: String,\n      \"default\": ''\n    },\n    wrapStyle: {\n      type: Object\n    },\n    itemTag: {\n      type: String,\n      \"default\": 'div'\n    },\n    itemClass: {\n      type: String,\n      \"default\": ''\n    },\n    itemClassAdd: {\n      type: Function\n    },\n    itemStyle: {\n      type: Object\n    },\n    headerTag: {\n      type: String,\n      \"default\": 'div'\n    },\n    headerClass: {\n      type: String,\n      \"default\": ''\n    },\n    headerStyle: {\n      type: Object\n    },\n    footerTag: {\n      type: String,\n      \"default\": 'div'\n    },\n    footerClass: {\n      type: String,\n      \"default\": ''\n    },\n    footerStyle: {\n      type: Object\n    },\n    itemScopedSlots: {\n      type: Object\n    }\n  };\n  var ItemProps = {\n    index: {\n      type: Number\n    },\n    event: {\n      type: String\n    },\n    tag: {\n      type: String\n    },\n    horizontal: {\n      type: Boolean\n    },\n    source: {\n      type: Object\n    },\n    component: {\n      type: [Object, Function]\n    },\n    uniqueKey: {\n      type: [String, Number]\n    },\n    extraProps: {\n      type: Object\n    },\n    scopedSlots: {\n      type: Object\n    }\n  };\n  var SlotProps = {\n    event: {\n      type: String\n    },\n    uniqueKey: {\n      type: String\n    },\n    tag: {\n      type: String\n    },\n    horizontal: {\n      type: Boolean\n    }\n  };\n\n  /**\n   * item and slot component both use similar wrapper\n   * we need to know their size change at any time\n   */\n  var Wrapper = {\n    created: function created() {\n      this.shapeKey = this.horizontal ? 'offsetWidth' : 'offsetHeight';\n    },\n    mounted: function mounted() {\n      var _this = this;\n\n      if (typeof ResizeObserver !== 'undefined') {\n        this.resizeObserver = new ResizeObserver(function () {\n          _this.dispatchSizeChange();\n        });\n        this.resizeObserver.observe(this.$el);\n      }\n    },\n    // since componet will be reused, so disptach when updated\n    updated: function updated() {\n      this.dispatchSizeChange();\n    },\n    beforeDestroy: function beforeDestroy() {\n      if (this.resizeObserver) {\n        this.resizeObserver.disconnect();\n        this.resizeObserver = null;\n      }\n    },\n    methods: {\n      getCurrentSize: function getCurrentSize() {\n        return this.$el ? this.$el[this.shapeKey] : 0;\n      },\n      // tell parent current size identify by unqiue key\n      dispatchSizeChange: function dispatchSizeChange() {\n        this.$parent.$emit(this.event, this.uniqueKey, this.getCurrentSize(), this.hasInitial);\n      }\n    }\n  }; // wrapping for item\n\n  var Item = Vue.component('virtual-list-item', {\n    mixins: [Wrapper],\n    props: ItemProps,\n    render: function render(h) {\n      var tag = this.tag,\n          component = this.component,\n          _this$extraProps = this.extraProps,\n          extraProps = _this$extraProps === void 0 ? {} : _this$extraProps,\n          index = this.index,\n          _this$scopedSlots = this.scopedSlots,\n          scopedSlots = _this$scopedSlots === void 0 ? {} : _this$scopedSlots,\n          uniqueKey = this.uniqueKey;\n      extraProps.source = this.source;\n      extraProps.index = index;\n      return h(tag, {\n        key: uniqueKey,\n        attrs: {\n          role: 'listitem'\n        }\n      }, [h(component, {\n        props: extraProps,\n        scopedSlots: scopedSlots\n      })]);\n    }\n  }); // wrapping for slot\n\n  var Slot = Vue.component('virtual-list-slot', {\n    mixins: [Wrapper],\n    props: SlotProps,\n    render: function render(h) {\n      var tag = this.tag,\n          uniqueKey = this.uniqueKey;\n      return h(tag, {\n        key: uniqueKey,\n        attrs: {\n          role: uniqueKey\n        }\n      }, this.$slots[\"default\"]);\n    }\n  });\n\n  /**\n   * virtual list default component\n   */\n  var EVENT_TYPE = {\n    ITEM: 'item_resize',\n    SLOT: 'slot_resize'\n  };\n  var SLOT_TYPE = {\n    HEADER: 'header',\n    // string value also use for aria role attribute\n    FOOTER: 'footer'\n  };\n  var VirtualList = Vue.component('virtual-list', {\n    props: VirtualProps,\n    data: function data() {\n      return {\n        range: null\n      };\n    },\n    watch: {\n      'dataSources.length': function dataSourcesLength() {\n        this.virtual.updateParam('uniqueIds', this.getUniqueIdFromDataSources());\n        this.virtual.handleDataSourcesChange();\n      },\n      keeps: function keeps(newValue) {\n        this.virtual.updateParam('keeps', newValue);\n        this.virtual.handleSlotSizeChange();\n      },\n      start: function start(newValue) {\n        this.scrollToIndex(newValue);\n      },\n      offset: function offset(newValue) {\n        this.scrollToOffset(newValue);\n      }\n    },\n    created: function created() {\n      this.isHorizontal = this.direction === 'horizontal';\n      this.directionKey = this.isHorizontal ? 'scrollLeft' : 'scrollTop';\n      this.installVirtual(); // listen item size change\n\n      this.$on(EVENT_TYPE.ITEM, this.onItemResized); // listen slot size change\n\n      if (this.$slots.header || this.$slots.footer) {\n        this.$on(EVENT_TYPE.SLOT, this.onSlotResized);\n      }\n    },\n    // set back offset when awake from keep-alive\n    activated: function activated() {\n      this.scrollToOffset(this.virtual.offset);\n    },\n    mounted: function mounted() {\n      // set position\n      if (this.start) {\n        this.scrollToIndex(this.start);\n      } else if (this.offset) {\n        this.scrollToOffset(this.offset);\n      } // in page mode we bind scroll event to document\n\n\n      if (this.pageMode) {\n        this.updatePageModeFront();\n        document.addEventListener('scroll', this.onScroll, {\n          passive: false\n        });\n      }\n    },\n    beforeDestroy: function beforeDestroy() {\n      this.virtual.destroy();\n\n      if (this.pageMode) {\n        document.removeEventListener('scroll', this.onScroll);\n      }\n    },\n    methods: {\n      // get item size by id\n      getSize: function getSize(id) {\n        return this.virtual.sizes.get(id);\n      },\n      // get the total number of stored (rendered) items\n      getSizes: function getSizes() {\n        return this.virtual.sizes.size;\n      },\n      // return current scroll offset\n      getOffset: function getOffset() {\n        if (this.pageMode) {\n          return document.documentElement[this.directionKey] || document.body[this.directionKey];\n        } else {\n          var root = this.$refs.root;\n          return root ? Math.ceil(root[this.directionKey]) : 0;\n        }\n      },\n      // return client viewport size\n      getClientSize: function getClientSize() {\n        var key = this.isHorizontal ? 'clientWidth' : 'clientHeight';\n\n        if (this.pageMode) {\n          return document.documentElement[key] || document.body[key];\n        } else {\n          var root = this.$refs.root;\n          return root ? Math.ceil(root[key]) : 0;\n        }\n      },\n      // return all scroll size\n      getScrollSize: function getScrollSize() {\n        var key = this.isHorizontal ? 'scrollWidth' : 'scrollHeight';\n\n        if (this.pageMode) {\n          return document.documentElement[key] || document.body[key];\n        } else {\n          var root = this.$refs.root;\n          return root ? Math.ceil(root[key]) : 0;\n        }\n      },\n      // set current scroll position to a expectant offset\n      scrollToOffset: function scrollToOffset(offset) {\n        if (this.pageMode) {\n          document.body[this.directionKey] = offset;\n          document.documentElement[this.directionKey] = offset;\n        } else {\n          var root = this.$refs.root;\n\n          if (root) {\n            root[this.directionKey] = offset;\n          }\n        }\n      },\n      // set current scroll position to a expectant index\n      scrollToIndex: function scrollToIndex(index) {\n        // scroll to bottom\n        if (index >= this.dataSources.length - 1) {\n          this.scrollToBottom();\n        } else {\n          var offset = this.virtual.getOffset(index);\n          this.scrollToOffset(offset);\n        }\n      },\n      // set current scroll position to bottom\n      scrollToBottom: function scrollToBottom() {\n        var _this = this;\n\n        var shepherd = this.$refs.shepherd;\n\n        if (shepherd) {\n          var offset = shepherd[this.isHorizontal ? 'offsetLeft' : 'offsetTop'];\n          this.scrollToOffset(offset); // check if it's really scrolled to the bottom\n          // maybe list doesn't render and calculate to last range\n          // so we need retry in next event loop until it really at bottom\n\n          setTimeout(function () {\n            if (_this.getOffset() + _this.getClientSize() < _this.getScrollSize()) {\n              _this.scrollToBottom();\n            }\n          }, 3);\n        }\n      },\n      // when using page mode we need update slot header size manually\n      // taking root offset relative to the browser as slot header size\n      updatePageModeFront: function updatePageModeFront() {\n        var root = this.$refs.root;\n\n        if (root) {\n          var rect = root.getBoundingClientRect();\n          var defaultView = root.ownerDocument.defaultView;\n          var offsetFront = this.isHorizontal ? rect.left + defaultView.pageXOffset : rect.top + defaultView.pageYOffset;\n          this.virtual.updateParam('slotHeaderSize', offsetFront);\n        }\n      },\n      // reset all state back to initial\n      reset: function reset() {\n        this.virtual.destroy();\n        this.scrollToOffset(0);\n        this.installVirtual();\n      },\n      // ----------- public method end -----------\n      installVirtual: function installVirtual() {\n        this.virtual = new Virtual({\n          slotHeaderSize: 0,\n          slotFooterSize: 0,\n          keeps: this.keeps,\n          estimateSize: this.estimateSize,\n          buffer: Math.round(this.keeps / 3),\n          // recommend for a third of keeps\n          uniqueIds: this.getUniqueIdFromDataSources()\n        }, this.onRangeChanged); // sync initial range\n\n        this.range = this.virtual.getRange();\n      },\n      getUniqueIdFromDataSources: function getUniqueIdFromDataSources() {\n        var dataKey = this.dataKey;\n        return this.dataSources.map(function (dataSource) {\n          return typeof dataKey === 'function' ? dataKey(dataSource) : dataSource[dataKey];\n        });\n      },\n      // event called when each item mounted or size changed\n      onItemResized: function onItemResized(id, size) {\n        this.virtual.saveSize(id, size);\n        this.$emit('resized', id, size);\n      },\n      // event called when slot mounted or size changed\n      onSlotResized: function onSlotResized(type, size, hasInit) {\n        if (type === SLOT_TYPE.HEADER) {\n          this.virtual.updateParam('slotHeaderSize', size);\n        } else if (type === SLOT_TYPE.FOOTER) {\n          this.virtual.updateParam('slotFooterSize', size);\n        }\n\n        if (hasInit) {\n          this.virtual.handleSlotSizeChange();\n        }\n      },\n      // here is the rerendering entry\n      onRangeChanged: function onRangeChanged(range) {\n        this.range = range;\n      },\n      onScroll: function onScroll(evt) {\n        var offset = this.getOffset();\n        var clientSize = this.getClientSize();\n        var scrollSize = this.getScrollSize(); // \biOS scroll-spring-back behavior will make direction mistake\n\n        if (offset < 0 || offset + clientSize > scrollSize + 1 || !scrollSize) {\n          return;\n        }\n\n        this.virtual.handleScroll(offset);\n        this.emitEvent(offset, clientSize, scrollSize, evt);\n      },\n      // emit event in special position\n      emitEvent: function emitEvent(offset, clientSize, scrollSize, evt) {\n        this.$emit('scroll', evt, this.virtual.getRange());\n\n        if (this.virtual.isFront() && !!this.dataSources.length && offset - this.topThreshold <= 0) {\n          this.$emit('totop');\n        } else if (this.virtual.isBehind() && offset + clientSize + this.bottomThreshold >= scrollSize) {\n          this.$emit('tobottom');\n        }\n      },\n      // get the real render slots based on range data\n      // in-place patch strategy will try to reuse components as possible\n      // so those components that are reused will not trigger lifecycle mounted\n      getRenderSlots: function getRenderSlots(h) {\n        var slots = [];\n        var _this$range = this.range,\n            start = _this$range.start,\n            end = _this$range.end;\n        var dataSources = this.dataSources,\n            dataKey = this.dataKey,\n            itemClass = this.itemClass,\n            itemTag = this.itemTag,\n            itemStyle = this.itemStyle,\n            isHorizontal = this.isHorizontal,\n            extraProps = this.extraProps,\n            dataComponent = this.dataComponent,\n            itemScopedSlots = this.itemScopedSlots;\n\n        for (var index = start; index <= end; index++) {\n          var dataSource = dataSources[index];\n\n          if (dataSource) {\n            var uniqueKey = typeof dataKey === 'function' ? dataKey(dataSource) : dataSource[dataKey];\n\n            if (typeof uniqueKey === 'string' || typeof uniqueKey === 'number') {\n              slots.push(h(Item, {\n                props: {\n                  index: index,\n                  tag: itemTag,\n                  event: EVENT_TYPE.ITEM,\n                  horizontal: isHorizontal,\n                  uniqueKey: uniqueKey,\n                  source: dataSource,\n                  extraProps: extraProps,\n                  component: dataComponent,\n                  scopedSlots: itemScopedSlots\n                },\n                style: itemStyle,\n                \"class\": \"\".concat(itemClass).concat(this.itemClassAdd ? ' ' + this.itemClassAdd(index) : '')\n              }));\n            } else {\n              console.warn(\"Cannot get the data-key '\".concat(dataKey, \"' from data-sources.\"));\n            }\n          } else {\n            console.warn(\"Cannot get the index '\".concat(index, \"' from data-sources.\"));\n          }\n        }\n\n        return slots;\n      }\n    },\n    // render function, a closer-to-the-compiler alternative to templates\n    // https://vuejs.org/v2/guide/render-function.html#The-Data-Object-In-Depth\n    render: function render(h) {\n      var _this$$slots = this.$slots,\n          header = _this$$slots.header,\n          footer = _this$$slots.footer;\n      var _this$range2 = this.range,\n          padFront = _this$range2.padFront,\n          padBehind = _this$range2.padBehind;\n      var isHorizontal = this.isHorizontal,\n          pageMode = this.pageMode,\n          rootTag = this.rootTag,\n          wrapTag = this.wrapTag,\n          wrapClass = this.wrapClass,\n          wrapStyle = this.wrapStyle,\n          headerTag = this.headerTag,\n          headerClass = this.headerClass,\n          headerStyle = this.headerStyle,\n          footerTag = this.footerTag,\n          footerClass = this.footerClass,\n          footerStyle = this.footerStyle;\n      var paddingStyle = {\n        padding: isHorizontal ? \"0px \".concat(padBehind, \"px 0px \").concat(padFront, \"px\") : \"\".concat(padFront, \"px 0px \").concat(padBehind, \"px\")\n      };\n      var wrapperStyle = wrapStyle ? Object.assign({}, wrapStyle, paddingStyle) : paddingStyle;\n      return h(rootTag, {\n        ref: 'root',\n        on: {\n          '&scroll': !pageMode && this.onScroll\n        }\n      }, [// header slot\n      header ? h(Slot, {\n        \"class\": headerClass,\n        style: headerStyle,\n        props: {\n          tag: headerTag,\n          event: EVENT_TYPE.SLOT,\n          uniqueKey: SLOT_TYPE.HEADER\n        }\n      }, header) : null, // main list\n      h(wrapTag, {\n        \"class\": wrapClass,\n        attrs: {\n          role: 'group'\n        },\n        style: wrapperStyle\n      }, this.getRenderSlots(h)), // footer slot\n      footer ? h(Slot, {\n        \"class\": footerClass,\n        style: footerStyle,\n        props: {\n          tag: footerTag,\n          event: EVENT_TYPE.SLOT,\n          uniqueKey: SLOT_TYPE.FOOTER\n        }\n      }, footer) : null, // an empty element use to scroll to bottom\n      h('div', {\n        ref: 'shepherd',\n        style: {\n          width: isHorizontal ? '0px' : '100%',\n          height: isHorizontal ? '100%' : '0px'\n        }\n      })]);\n    }\n  });\n\n  return VirtualList;\n\n})));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-virtual-scroll-list/dist/index.js\n// module id = A7yg\n// module chunks = 3","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/get-iterator.js\n// module id = BO1k\n// module chunks = 3","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/get-iterator.js\n// module id = fxRn\n// module chunks = 3","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.get-iterator.js\n// module id = g8Ux\n// module chunks = 3","<template lang=\"pug\">\n  .im-dialog(:class=\"{active, push}\")\n    router-link.im-dailog__pic(:to=\"{name: 'ProfileId', params: {id: info.last_message.recipient.id}}\")\n      img(:src=\"info.last_message.recipient.photo\" :alt=\"info.last_message.recipient.first_name\")\n    .im-dialog__info\n      router-link.im-dialog__name(:to=\"{name: 'ProfileId', params: {id: info.last_message.recipient.id}}\") {{info.last_message.recipient.first_name + ' ' + info.last_message.recipient.last_name}}\n      span.user-status(:class=\"{online}\") {{statusText}}\n    .im-dialog__content\n      p.im-dialog__last\n        span.im-dialog__last-me(v-if=\"me\") Вы: \n        | {{info.last_message.message_text}}\n      span.im-dialog__time {{info.last_message.time | moment('from')}}\n    span.im-dialog__push(v-if=\"push > 0\") {{push}}\n</template>\n\n<script>\nimport moment from 'moment'\nexport default {\n  name: 'ImDialog',\n  props: {\n    active: Boolean,\n    push: Number,\n    online: Boolean,\n    me: Boolean,\n    info: Object\n  },\n  computed: {\n    statusText() {\n      return this.online\n        ? 'Онлайн'\n        : 'был в сети ' + moment(this.info.last_message.recipient.last_online_time).fromNow()\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\">\n@import '../../assets/stylus/base/vars.styl';\n\n.im-dialog {\n  display: flex;\n  align-items: center;\n  height: 100px;\n  position: relative;\n  padding: 0 6.38%;\n  z-index: 0;\n  cursor: pointer;\n\n  &:before {\n    content: '';\n    display: none;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    background-color: #F8FAFD;\n    z-index: -1;\n  }\n\n  &:after {\n    content: '';\n    display: block;\n    height: 1px;\n    width: 87.24%;\n    background-color: #E3E8EE;\n    position: absolute;\n    bottom: 0;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n\n  &.push + &.active, &.active + &.push {\n    &:after {\n      display: none;\n    }\n  }\n\n  &.active {\n    &:after {\n      display: none;\n    }\n\n    &:before {\n      display: block;\n    }\n  }\n\n  &.push {\n    &:after {\n      display: none;\n    }\n\n    &:before {\n      display: block;\n      background-color: #E9F5EF;\n    }\n\n    .im-dialog__content {\n      max-width: 30%;\n    }\n\n    .im-dialog__time {\n      color: #7D9A8B;\n    }\n  }\n}\n\n.im-dailog__pic {\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  overflow: hidden;\n  margin-right: 15px;\n  flex: none;\n}\n\n.im-dialog__info {\n  width: 100%;\n  max-width: 27.11%;\n  min-width: 150px;\n  margin-right: 30px;\n\n  @media (max-width: breakpoint-xl) {\n    display: none;\n  }\n}\n\n.im-dialog__name {\n  font-size: 15px;\n  line-height: 22px;\n  color: steel-gray;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.im-dialog__content {\n  max-width: 37%;\n\n  @media (max-width: breakpoint-xl) {\n    display: none;\n  }\n}\n\n.im-dialog__last {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 13px;\n  line-height: 18px;\n  letter-spacing: -0.003em;\n\n  &-me {\n    color: eucalypt;\n  }\n}\n\n.im-dialog__time {\n  color: #A4A4B8;\n  font-size: 13px;\n  line-height: 19px;\n}\n\n.im-dialog__push {\n  width: 27px;\n  height: 27px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 15px;\n  line-height: 27px;\n  font-weight: 600;\n  color: #fff;\n  background-color: #E65151;\n  margin-left: auto;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Im/Dialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"im-dialog\",class:{active: _vm.active, push: _vm.push}},[_c('router-link',{staticClass:\"im-dailog__pic\",attrs:{\"to\":{name: 'ProfileId', params: {id: _vm.info.last_message.recipient.id}}}},[_c('img',{attrs:{\"src\":_vm.info.last_message.recipient.photo,\"alt\":_vm.info.last_message.recipient.first_name}})]),_c('div',{staticClass:\"im-dialog__info\"},[_c('router-link',{staticClass:\"im-dialog__name\",attrs:{\"to\":{name: 'ProfileId', params: {id: _vm.info.last_message.recipient.id}}}},[_vm._v(_vm._s(_vm.info.last_message.recipient.first_name + ' ' + _vm.info.last_message.recipient.last_name))]),_c('span',{staticClass:\"user-status\",class:{online: _vm.online}},[_vm._v(_vm._s(_vm.statusText))])],1),_c('div',{staticClass:\"im-dialog__content\"},[_c('p',{staticClass:\"im-dialog__last\"},[(_vm.me)?_c('span',{staticClass:\"im-dialog__last-me\"},[_vm._v(\"Вы: \")]):_vm._e(),_vm._v(_vm._s(_vm.info.last_message.message_text))]),_c('span',{staticClass:\"im-dialog__time\"},[_vm._v(_vm._s(_vm._f(\"moment\")(_vm.info.last_message.time,'from')))])]),(_vm.push > 0)?_c('span',{staticClass:\"im-dialog__push\"},[_vm._v(_vm._s(_vm.push))]):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0b6319d8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Im/Dialog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0b6319d8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Dialog.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Dialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Dialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0b6319d8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Dialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Im/Dialog.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\n  // Please avoid to use margin between messages block\n  // or it will glitter on scroll\n  h5.im-chat__message-title(v-if='source.stubDate') {{source.date | moment('DD MMMM YYYY')}}\n  .im-chat__message-block(v-else :class=\"{me: source.isSentByMe}\")\n      p.im-chat__message-text {{source.message_text}}\n      span.im-chat__message-time {{source.time | moment('YYYY-MM-DD hh:mm')}}\n</template>\n\n<script>\nimport moment from 'moment'\n\nexport default {\n  name: 'infinite-loading-item',\n  props: {\n    source: {\n      type: Object,\n      default() {\n        return {}\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n@import '../../assets/stylus/base/vars.styl';\n\n\n.im-chat__message-day {\n  &+& {\n    margin-top: 50px;\n  }\n}\n\n.im-chat__message-title {\n  color: #8A94A4;\n  font-size: 15px;\n  text-align: center;\n  display: block;\n  width: 100%;\n}\n\n.im-chat__message-block {\n  display: flex;\n  align-items: center;\n  max-width: 460px;\n\n  &+& {\n    margin-top: 20px;\n  }\n\n  &.me + & {\n    margin-top: 30px;\n  }\n\n  &.me {\n    flex-direction: row-reverse;\n    max-width: 450px;\n    margin-left: auto;\n\n    .im-chat__message-text {\n      background-color: eucalypt;\n      color: #fff;\n      box-shadow: 0px 4px 15px #D4E8DD;\n    }\n\n    .im-chat__message-time {\n      margin-right: 15px;\n      margin-left: 0;\n    }\n  }\n}\n\n.im-chat__message-text {\n  background-color: #FFFFFF;\n  box-shadow: 0px 4px 15px #EFF1F6;\n  border-radius: 20px;\n  padding: 15px 20px;\n  color: steel-gray;\n  font-size: 15px;\n  line-height: 23px;\n}\n\n.im-chat__message-time {\n  font-size: 13px;\n  color: #BAC3D0;\n  margin-left: 15px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Im/ChatMessage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.source.stubDate)?_c('h5',{staticClass:\"im-chat__message-title\"},[_vm._v(_vm._s(_vm._f(\"moment\")(_vm.source.date,'DD MMMM YYYY')))]):_c('div',{staticClass:\"im-chat__message-block\",class:{me: _vm.source.isSentByMe}},[_c('p',{staticClass:\"im-chat__message-text\"},[_vm._v(_vm._s(_vm.source.message_text))]),_c('span',{staticClass:\"im-chat__message-time\"},[_vm._v(_vm._s(_vm._f(\"moment\")(_vm.source.time,'YYYY-MM-DD hh:mm')))])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1e46ed34\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Im/ChatMessage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1e46ed34\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ChatMessage.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChatMessage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChatMessage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1e46ed34\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ChatMessage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1e46ed34\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Im/ChatMessage.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\n  .im-chat\n    .im-chat__user\n      router-link.im-chat__user-pic(:to=\"{name: 'ProfileId', params: {id: info.last_message.recipient.id}}\")\n        img(:src=\"info.last_message.recipient.photo\" :alt=\"info.last_message.recipient.first_name\")\n      router-link.im-chat__user-name(:to=\"{name: 'ProfileId', params: {id: info.last_message.recipient.id}}\") {{info.last_message.recipient.first_name + ' ' + info.last_message.recipient.last_name}}\n      span.user-status(:class=\"{online}\") {{statusText}}\n    .im-chat__infitite_list_wrapper\n      virtual-list.im-chat__infitite_list.scroll-touch(:size=\"60\"\n        :keeps=\"120\"\n        :data-key=\"'sid'\"\n        :data-sources=\"messagesGrouped\"\n        :data-component=\"itemComponent\"\n        :wrap-class=\"'im-chat__message'\"\n        :root-tag=\"'section'\"\n        @totop=\"onScrollToTop\"\n        @scroll.passive=\"onScroll\"\n        @tobottom=\"onScrollToBottom\"\n        ref=\"vsl\"\n      )\n        .im-chat__loader(slot=\"header\", v-show=\"fetching\")\n          .spinner(v-show=\"!isHistoryEndReached()\")\n          .finished(v-show=\"isHistoryEndReached()\") Больше сообщений нет\n    form.im-chat__enter(action=\"#\" @submit.prevent=\"onSubmitMessage\")\n      input.im-chat__enter-input(type=\"text\" placeholder=\"Ваше сообщение...\" v-model=\"mes\")\n</template>\n\n<script>\nimport moment from 'moment'\nimport Vue from 'vue'\nimport { mapActions, mapGetters } from 'vuex'\nimport ChatMessage from '@/components/Im/ChatMessage'\nimport VirtualList from 'vue-virtual-scroll-list'\n\nconst makeHeader = msgDate => {\n  return { sid: `group-${msgDate}`, stubDate: true, date: msgDate }\n}\nexport default {\n  name: 'ImChat',\n  props: {\n    info: Object,\n    messages: Array,\n    online: Boolean\n  },\n  data: () => ({\n    mes: '',\n    itemComponent: ChatMessage,\n    isUserViewHistory: false,\n    fetching: false\n  }),\n  mounted() {\n    this.follow = true\n  },\n  watch: {\n    messages() {\n      if (this.follow) this.setVirtualListToBottom()\n    }\n  },\n  computed: {\n    statusText() {\n      return this.online\n        ? 'Онлайн'\n        : 'был в сети ' + moment(this.info.last_message.recipient.last_online_time).fromNow()\n    },\n    messagesGrouped() {\n      let groups = []\n      let headerDate = null\n\n      for (const msg of this.messages) {\n        let msgDate = moment(msg.time).format('YYYY-MM-DD')\n        if (msgDate !== headerDate) {\n          headerDate = msgDate\n          groups.push(makeHeader(headerDate))\n        }\n        groups.push(msg)\n      }\n      return groups\n    }\n  },\n  methods: {\n    ...mapActions('profile/dialogs', ['postMessage', 'loadOlderMessages']),\n    ...mapGetters('profile/dialogs', ['isHistoryEndReached']),\n    onSubmitMessage() {\n      this.postMessage({ id: this.info.id, message_text: this.mes })\n      this.mes = ''\n    },\n    async onScrollToTop() {\n      if (this.$refs.vsl) {\n        if (!this.isHistoryEndReached()) {\n          let oldest = this.messagesGrouped[0]\n\n          this.fetching = true\n          await this.loadOlderMessages()\n          this.setVirtualListToOffset(1)\n\n          this.$nextTick(() => {\n            let offset = 0\n            for (const groupedMsg of this.messagesGrouped) {\n              if (groupedMsg.sid === oldest.sid) break\n              offset += this.$refs.vsl.getSize(groupedMsg.sid)\n            }\n\n            this.setVirtualListToOffset(offset)\n            this.fetching = false\n          })\n        }\n      }\n    },\n    onScroll() {\n      this.follow = false\n    },\n    onScrollToBottom() {\n      this.follow = true\n    },\n    setVirtualListToOffset(offset) {\n      if (this.$refs.vsl) {\n        this.$refs.vsl.scrollToOffset(offset)\n      }\n    },\n    setVirtualListToBottom() {\n      if (this.$refs.vsl) {\n        this.$refs.vsl.scrollToBottom()\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\">\n@import '../../assets/stylus/base/vars.styl';\n\n.im-chat {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n\n.im-chat__user {\n  border-bottom: 1px solid #E3E8EE;\n  display: flex;\n  align-items: center;\n  height: 60px;\n  padding: 30px 20px;\n  font-size: 13px;\n  background-color: #F8FAFD;\n}\n\n.im-chat__user-pic {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  overflow: hidden;\n  margin-right: 10px;\n}\n\n.im-chat__user-name {\n  font-weight: 600;\n  color: steel-gray;\n  margin-right: auto;\n}\n\n.im-chat__user-status {\n  color: #9EA4AD;\n\n  &.online {\n    color: eucalypt;\n  }\n}\n\n.im-chat__infitite_list_wrapper {\n  position: relative;\n  flex: 1;\n}\n\n.im-chat__infitite_list {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  overflow-y: auto;\n}\n\n.im-chat__message > div {\n  padding-left: 30px;\n  padding-right: 30px;\n  padding: 20px;\n}\n\n.im-chat__enter {\n  display: block;\n  width: 100%;\n}\n\n.im-chat__enter-input {\n  width: 100%;\n  background-color: #fff;\n  padding: 0 40px;\n  font-size: 15px;\n  color: steel-gray;\n  height: 60px;\n\n  &::placeholder {\n    color: #B0B0BC;\n  }\n}\n\n\n.im-chat__loader {\n  padding: 1em;\n  .finished {\n    font-size: 14px;\n    text-align: center;\n    color: #bfbfbf;\n  }\n  .spinner {\n    font-size: 10px;\n    margin: 0px auto;\n    text-indent: -9999em;\n    width: 25px;\n    height: 25px;\n    border-radius: 50%;\n    background: #ffffff;\n    background: linear-gradient(to right, eucalypt 10%, rgba(255, 255, 255, 0) 42%);\n    position: relative;\n    animation: load3 1.4s infinite linear;\n    transform: translateZ(0);\n  }\n  .spinner:before {\n    width: 50%;\n    height: 50%;\n    background: eucalypt;\n    border-radius: 100% 0 0 0;\n    position: absolute;\n    top: 0;\n    left: 0;\n    content: '';\n  }\n  .spinner:after {\n    background: #f8fafd;\n    width: 75%;\n    height: 75%;\n    border-radius: 50%;\n    content: '';\n    margin: auto;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n  }\n  @-webkit-keyframes load3 {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n  @keyframes load3 {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Im/Chat.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"im-chat\"},[_c('div',{staticClass:\"im-chat__user\"},[_c('router-link',{staticClass:\"im-chat__user-pic\",attrs:{\"to\":{name: 'ProfileId', params: {id: _vm.info.last_message.recipient.id}}}},[_c('img',{attrs:{\"src\":_vm.info.last_message.recipient.photo,\"alt\":_vm.info.last_message.recipient.first_name}})]),_c('router-link',{staticClass:\"im-chat__user-name\",attrs:{\"to\":{name: 'ProfileId', params: {id: _vm.info.last_message.recipient.id}}}},[_vm._v(_vm._s(_vm.info.last_message.recipient.first_name + ' ' + _vm.info.last_message.recipient.last_name))]),_c('span',{staticClass:\"user-status\",class:{online: _vm.online}},[_vm._v(_vm._s(_vm.statusText))])],1),_c('div',{staticClass:\"im-chat__infitite_list_wrapper\"},[_c('virtual-list',{ref:\"vsl\",staticClass:\"im-chat__infitite_list scroll-touch\",attrs:{\"size\":60,\"keeps\":120,\"data-key\":'sid',\"data-sources\":_vm.messagesGrouped,\"data-component\":_vm.itemComponent,\"wrap-class\":'im-chat__message',\"root-tag\":'section'},on:{\"totop\":_vm.onScrollToTop,\"&scroll\":function($event){return _vm.onScroll($event)},\"tobottom\":_vm.onScrollToBottom}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.fetching),expression:\"fetching\"}],staticClass:\"im-chat__loader\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isHistoryEndReached()),expression:\"!isHistoryEndReached()\"}],staticClass:\"spinner\"}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isHistoryEndReached()),expression:\"isHistoryEndReached()\"}],staticClass:\"finished\"},[_vm._v(\"Больше сообщений нет\")])])])],1),_c('form',{staticClass:\"im-chat__enter\",attrs:{\"action\":\"#\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmitMessage($event)}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.mes),expression:\"mes\"}],staticClass:\"im-chat__enter-input\",attrs:{\"type\":\"text\",\"placeholder\":\"Ваше сообщение...\"},domProps:{\"value\":(_vm.mes)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.mes=$event.target.value}}})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7b27c774\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Im/Chat.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7b27c774\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Chat.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Chat.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Chat.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7b27c774\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Chat.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Im/Chat.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\n  .im\n    .im__dialogs\n      im-dialog(v-for=\"dialog in dialogs\"\n      :key=\"dialog.id\"\n      :info=\"dialog\"\n      :push=\"countPush(dialog.unread_count)\"\n      :me=\"dialog.last_message.isSentByMe\"\n      :active=\"activeDialog && dialog.id === activeDialog.id\"\n      :online=\"checkOnlineUser(dialog.last_message.recipient.last_online_time)\"\n      @click.native=\"clickOnDialog(dialog.id)\")\n    .im__chat(v-if=\"activeDialog\")\n      im-chat(:info=\"activeDialog\" :messages=\"messages\"\n      :online=\"checkOnlineUser(activeDialog.last_message.recipient.last_online_time)\" )\n</template>\n\n<script>\nimport moment from 'moment'\nimport { mapGetters, mapActions } from 'vuex'\nimport ImDialog from '@/components/Im/Dialog'\nimport ImChat from '@/components/Im/Chat'\nexport default {\n  name: 'Im',\n  components: { ImDialog, ImChat },\n  // data: () => ({\n  //   intervalForMessages: null\n  // }),\n  computed: {\n    ...mapGetters('profile/dialogs', ['messages', 'activeDialog', 'dialogs'])\n  },\n  methods: {\n    ...mapActions('profile/dialogs', [\n      'loadFreshMessages',\n      'switchDialog',\n      'closeDialog',\n      'createDialogWithUser',\n      'apiLoadAllDialogs'\n    ]),\n    countPush(unread) {\n      return unread > 0 ? unread : null\n    },\n    checkOnlineUser(time) {\n      return moment().diff(moment(time), 'seconds') <= 60\n    },\n    clickOnDialog(dialogId) {\n      this.$router.push({ name: 'Im', query: { activeDialog: dialogId } })\n    },\n    async selectDialogByRoute(route, vm) {\n      if (route.query.activeDialog) {\n        vm.switchDialog(route.query.activeDialog)\n      } else if (route.query.userId) {\n        vm.createDialogWithUser(route.query.userId)\n      } else if (vm.dialogs.length > 0) {\n        vm.$router.push({ name: 'Im', query: { activeDialog: vm.dialogs[0].id } })\n      } else {\n        await vm.apiLoadAllDialogs()\n        if (vm.dialogs.length > 0) {\n          vm.$router.push({ name: 'Im', query: { activeDialog: vm.dialogs[0].id } })\n        }\n        console.log('No dialogs at all')\n      }\n    }\n  },\n  beforeRouteEnter(to, from, next) {\n    next(async vm => {\n      vm.selectDialogByRoute(to, vm)\n    })\n  },\n  beforeRouteUpdate(to, from, next) {\n    this.selectDialogByRoute(to, this)\n    next()\n  },\n  beforeDestroy() {\n    this.closeDialog()\n  }\n}\n</script>\n\n<style lang=\"stylus\">\n@import '../../assets/stylus/base/vars.styl';\n\n.im {\n  display: flex;\n  height: 'calc(100vh - %s)' % header-height;\n}\n\n.im__dialogs {\n  width: 100%;\n  max-width: 39.13%;\n  overflow-y: auto;\n  max-height: 100%;\n  height: 100%;\n  background-color: #F2F5F9;\n\n  @media (max-width: breakpoint-xl) {\n    max-width: 120px;\n  }\n}\n\n.im__chat {\n  width: 100%;\n  flex: auto;\n  height: 100%;\n  background-color: #F8FAFD;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/User/Im.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"im\"},[_c('div',{staticClass:\"im__dialogs\"},_vm._l((_vm.dialogs),function(dialog){return _c('im-dialog',{key:dialog.id,attrs:{\"info\":dialog,\"push\":_vm.countPush(dialog.unread_count),\"me\":dialog.last_message.isSentByMe,\"active\":_vm.activeDialog && dialog.id === _vm.activeDialog.id,\"online\":_vm.checkOnlineUser(dialog.last_message.recipient.last_online_time)},nativeOn:{\"click\":function($event){return _vm.clickOnDialog(dialog.id)}}})}),1),(_vm.activeDialog)?_c('div',{staticClass:\"im__chat\"},[_c('im-chat',{attrs:{\"info\":_vm.activeDialog,\"messages\":_vm.messages,\"online\":_vm.checkOnlineUser(_vm.activeDialog.last_message.recipient.last_online_time)}})],1):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3b23352c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/User/Im.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3b23352c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Im.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Im.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Im.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3b23352c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Im.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/User/Im.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}